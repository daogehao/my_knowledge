# 索引

## 主键索引
- 主键索引也叫聚簇索引（Clustered Index），数据即索引，索引即数据。
- 数据存储顺序与索引顺序一致，索引的叶子节点直接存储数据
- 一张表只能有一个聚簇索引
- InnoDB 默认使用主键作为聚簇索引，如果没有主键会选取唯一索引，否则自动生成一个隐藏的rowid作为聚簇索引


> 优缺点：
> 1. 询主键很快，因为索引和数据存储在一起，数据不用从多个数据块提取，减少一次磁盘IO。
> 2. 范围查询效率很高，如between 数据是物理联系存储的，读取高效。
> 3. 排序查找快，如order by 主键，数据按照主键顺序存储，数据在逻辑上是连续的。
> 4. 主键值一般不能更新，更新会触发索引重排。


### 主键索引结果
1. 数据和主键索引以B+树结构存储，叶子节点存储数据。因此主键ID可以直接获取到此行数据，仅有一次IO。


## 二级索引
- 二级索引也叫辅助索引，非聚簇索引（Non-Clustered Index），数据与索引分离，索引指向数据。
- 二级索引是普通的B+树索引，叶子节点存储的不是数据，而是主键的值，通过主键再去主键索引获取完整行数据。

> 优缺点：
> 1. 可以根据不同的字段建立多个二级索引，提高查询效率。
> 2. 查询时候需要回表，获取数据越多，磁盘IO越多，效率越低。
> 3. 占用额外的存储空间，插入删除更慢。

## 组合索引
- 组合索引也叫联合索引（Composite Index）
- 组合索引就是多个字段组合成一个索引，如：(a,b)
- 组合索引遵循最左匹配原则，必须从左到右，如：(a,b)，查询a=1，会命中索引，查询a=1 and b=2，也会命中索引。
