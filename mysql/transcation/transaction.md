# 数据事务
一个事务是由一组数据库操作组成的一个逻辑单元，它要么完全执行（提交），要么完全不执行（回滚）。事务有以下几个重要特性，通常称为 ACID 特性：

- 原子性（Atomicity）：事务中的操作要么全部执行，要么全部不执行。
- 一致性（Consistency）：事务执行前后，数据库的状态必须是一致的。
- 隔离性（Isolation）：一个事务的执行不应受其他事务的干扰，每个事务都应有自己的数据视图。
- 持久性（Durability）：一旦事务提交，其结果就会永久保存。

## 事务的隔离级别
事务隔离级别是数据库管理系统为解决并发访问问题的一种方法，它定义了多个事务之间隔离的程度。事务隔离级别越高，事务的并发性越低，但事务的完整性和一致性也越高。
隔离级别有四种： 

### 读未提交（READ UNCOMMITTED）
- 在这个隔离级别下，一个事务可以读取其它事务未提交的数据（脏读 dirty read）。会导致数据不一致的风险。
- MVCC在此级别很少使用，因为事务可以看到所有未提交的修改
- 不建议使用

### 读已提交（READ COMMITTED）
- 在这个隔离级别下，一个事务只能读取已提交的数据（不可重复读）。但是会出现相同的查询在事务中多次结果不一致的情况。
- MVCC在此级别，事务会通过提交时间戳来读取数据的最新版本，单无法保证在整个事务执行期间数据的一致性。
- 不建议使用

### 可重复读（REPEATABLE READ）
- MYSQL的默认事务隔离级别，保证一个事务内多次读取相同数据时，结果时一致的，避免了不可重复读的问题，但是任然会出现幻读，即一个事务内查询的结果集在执行过程中会出现变化（如新插入数据影响查询结果）。
- MVCC在此级别，InnoDB通过在事务开始时保存一个快照来避免不可重复读，确保事务读取的数据版本不变。尽管如此，幻读任然是一个问题，通常需要通过显式锁来避免幻读问题。

### 串行化（SERIALIZABLE）
- 这是最高级别的隔离级别，事务会被严格串行化执行，避免了脏读、不可重复读和幻读。虽然可以保证数据的绝对一致性，但性能较低，因为会大幅度降低并发性。
- MVCC在该级别下的应用较少，主要依赖锁机制来确保数据的一致性。